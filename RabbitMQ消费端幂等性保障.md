# RabbitMQ消费端幂等性保障

如海量订单产生的业务高峰期如何避免消息的重复消费问题（可能因为系统原因导致消息重复发送，
但是只能执行一次）  

业界主流的幂等性操作方案：  

1、唯一ID + 指纹码 机制，利用数据库主键去重  
指纹码是为了确保当短时间内确实有多次操作，保证这几次操作不会被认为是重复的。  
好处：实现简单；  
坏处：高并发下有数据库写入的性能瓶颈；  
性能瓶颈解决：跟进ID进行分库分表进行算法路由。  

2、利用Redis的原子性实现  
实现Redis的原子特性的几种方式：自增、是否已存在等。  
这种方式的问题：Redis缓存与数据库的原子性如何保证（可能Redis写成功了，但是往数据库写失败了）？    
如果不即时落库，还要考虑Redis缓存与关系数据库定时同步的问题。